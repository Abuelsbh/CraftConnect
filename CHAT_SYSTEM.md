# ูุธุงู ุงูุฏุฑุฏุดุฉ - Firebase Realtime Database

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุงูุฏุฑุฏุดุฉ ุงููุงูู ุจุงุณุชุฎุฏุงู Firebase Realtime Database ูุชูููุฑ ุชุฌุฑุจุฉ ูุญุงุฏุซุฉ ููุฑูุฉ ููุชุทูุฑุฉ ุจูู ุงููุณุชุฎุฏููู ูุงูุญุฑูููู.

## ุงููููุฒุงุช

### โ ุงููููุฒุงุช ุงูููุชููุฉ
- **ูุญุงุฏุซุงุช ููุฑูุฉ**: ุงุณุชุฎุฏุงู Firebase Realtime Database ููุฑุณุงุฆู ุงูููุฑูุฉ
- **ูุงุฌูุฉ ูุณุชุฎุฏู ุญุฏูุซุฉ**: ุชุตููู ุฌููู ููุชุฌุงูุจ ูุน ุฌููุน ุฃุญุฌุงู ุงูุดุงุดุงุช
- **ุฅุฏุงุฑุฉ ุงููุญุงุฏุซุงุช**: ุฅูุดุงุก ูุญุฐู ูุฅุฏุงุฑุฉ ุบุฑู ุงูุฏุฑุฏุดุฉ
- **ุนุฑุถ ุงูุฑุณุงุฆู**: ููุงุนุงุช ุฑุณุงุฆู ุฌูููุฉ ูุน ุฏุนู ุงููุตูุต ูุงูุตูุฑ
- **ุญุงูุฉ ุงูุฑุณุงุฆู**: ุนุฑุถ ุญุงูุฉ ุงูุฅุฑุณุงู ูุงููุฑุงุกุฉ
- **ุงูููุช ูุงูุชุงุฑูุฎ**: ุนุฑุถ ุชูููุช ุงูุฑุณุงุฆู ุจุดูู ุฐูู
- **ุงูุชุฑุฌูุฉ**: ุฏุนู ูุงูู ููุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ**: ุงุณุชุฎุฏุงู Provider ูุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุชุทุจูู

### ๐ ุงููููุฒุงุช ุงููุฎุทุทุฉ
- **ุงูุฑุณุงุฆู ุงูุตูุชูุฉ**: ุชุณุฌูู ูุฅุฑุณุงู ุฑุณุงุฆู ุตูุชูุฉ
- **ูุดุงุฑูุฉ ุงููููุน**: ุฅุฑุณุงู ุงููููุน ุงูุญุงูู
- **ุฑูุน ุงููููุงุช**: ุฅุฑุณุงู ูููุงุช ูุฎุชููุฉ
- **ุงูุฅุดุนุงุฑุงุช**: ุฅุดุนุงุฑุงุช ููุฑูุฉ ููุฑุณุงุฆู ุงูุฌุฏูุฏุฉ
- **ุงูุจุญุซ ูู ุงูุฑุณุงุฆู**: ุงูุจุญุซ ูู ูุญุชูู ุงูุฑุณุงุฆู
- **ุญุธุฑ ุงููุณุชุฎุฏููู**: ุฅููุงููุฉ ุญุธุฑ ุงููุณุชุฎุฏููู
- **ุงูุญุงูุฉ ุงููุชุตูุฉ**: ุนุฑุถ ุญุงูุฉ ุงูุงุชุตุงู ูููุณุชุฎุฏููู

## ุงูุจููุฉ ุงูุชูููุฉ

### ุงูููุงุฐุฌ (Models)
```
lib/Models/chat_model.dart
โโโ ChatMessage: ูููุฐุฌ ุงูุฑุณุงูุฉ
โโโ ChatRoom: ูููุฐุฌ ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ
โโโ MessageType: ุฃููุงุน ุงูุฑุณุงุฆู (ูุตุ ุตูุฑุฉุ ูููุ ูููุน)
```

### ุงูุฎุฏูุงุช (Services)
```
lib/services/chat_service.dart
โโโ ุฅุฏุงุฑุฉ ุงูุงุชุตุงู ุจู Firebase Realtime Database
โโโ ุฅุฑุณุงู ูุงุณุชูุจุงู ุงูุฑุณุงุฆู
โโโ ุฅุฏุงุฑุฉ ุบุฑู ุงูุฏุฑุฏุดุฉ
โโโ ุชุญุฏูุซ ุญุงูุฉ ุงูุฑุณุงุฆู
```

### ูุฒูุฏู ุงูุญุงูุฉ (Providers)
```
lib/providers/chat_provider.dart
โโโ ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุฏุฑุฏุดุฉ
โโโ ุชุญููู ุงููุญุงุฏุซุงุช ูุงูุฑุณุงุฆู
โโโ ุฅุฑุณุงู ุงูุฑุณุงุฆู
โโโ ุฅุฏุงุฑุฉ ุงูุฃุฎุทุงุก ูุงูุชุญููู
```

### ูุงุฌูุงุช ุงููุณุชุฎุฏู (UI)
```
lib/Modules/Chat/
โโโ chat_page.dart: ุตูุญุฉ ูุงุฆูุฉ ุงููุญุงุฏุซุงุช
โโโ chat_room_screen.dart: ุดุงุดุฉ ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ
โโโ widgets/
    โโโ chat_room_tile.dart: ุนูุตุฑ ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ
    โโโ message_bubble.dart: ููุงุนุฉ ุงูุฑุณุงูุฉ
    โโโ chat_input.dart: ุฅุฏุฎุงู ุงูุฏุฑุฏุดุฉ
```

## ูุงุนุฏุฉ ุงูุจูุงูุงุช

### Firebase Realtime Database Structure
```json
{
  "chat_rooms": {
    "user1_user2": {
      "id": "user1_user2",
      "participant1Id": "user1",
      "participant2Id": "user2",
      "lastMessage": "ุขุฎุฑ ุฑุณุงูุฉ",
      "lastMessageTime": 1640995200000,
      "hasUnreadMessages": true,
      "unreadCount": 3,
      "participant1Name": "ุงุณู ุงููุณุชุฎุฏู ุงูุฃูู",
      "participant2Name": "ุงุณู ุงููุณุชุฎุฏู ุงูุซุงูู"
    }
  },
  "messages": {
    "message_id": {
      "id": "message_id",
      "senderId": "user1",
      "receiverId": "user2",
      "content": "ูุญุชูู ุงูุฑุณุงูุฉ",
      "imageUrl": "ุฑุงุจุท ุงูุตูุฑุฉ (ุงุฎุชูุงุฑู)",
      "timestamp": 1640995200000,
      "isRead": false,
      "type": "text"
    }
  }
}
```

## ุงูุงุณุชุฎุฏุงู

### 1. ุชููุฆุฉ ูุธุงู ุงูุฏุฑุฏุดุฉ
```dart
// ูู main.dart
ChangeNotifierProvider<ChatProvider>(create: (_) => ChatProvider())
```

### 2. ูุชุญ ุตูุญุฉ ุงููุญุงุฏุซุงุช
```dart
context.push('/chat');
```

### 3. ุฅูุดุงุก ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ
```dart
final chatProvider = Provider.of<ChatProvider>(context, listen: false);
await chatProvider.createChatRoom(otherUserId);
```

### 4. ุฅุฑุณุงู ุฑุณุงูุฉ
```dart
await chatProvider.sendMessage('ูุญุชูู ุงูุฑุณุงูุฉ');
```

### 5. ูุชุญ ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ
```dart
await chatProvider.openChatRoom(roomId);
context.push('/chat-room');
```

## ุงูุชูููู

### Firebase Realtime Database Rules
```json
{
  "rules": {
    "chat_rooms": {
      "$roomId": {
        ".read": "auth != null && (data.child('participant1Id').val() == auth.uid || data.child('participant2Id').val() == auth.uid)",
        ".write": "auth != null && (data.child('participant1Id').val() == auth.uid || data.child('participant2Id').val() == auth.uid)"
      }
    },
    "messages": {
      "$messageId": {
        ".read": "auth != null && (data.child('senderId').val() == auth.uid || data.child('receiverId').val() == auth.uid)",
        ".write": "auth != null && data.child('senderId').val() == auth.uid"
      }
    }
  }
}
```

## ุงูุฃูุงู

- **ุงููุตุงุฏูุฉ**: ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ูููุตูู ูููุญุงุฏุซุงุช
- **ุงูุตูุงุญูุงุช**: ูููู ูููุณุชุฎุฏููู ุงููุตูู ููุท ููุญุงุฏุซุงุชูู
- **ุงูุชุญูู**: ุงูุชุญูู ูู ูููุฉ ุงููุฑุณู ูุงููุณุชูุจู
- **ุงูุชุดููุฑ**: ุชุดููุฑ ุงูุจูุงูุงุช ูู ุงูููู

## ุงูุฃุฏุงุก

- **Streaming**: ุงุณุชุฎุฏุงู Streams ููุฑุณุงุฆู ุงูููุฑูุฉ
- **Caching**: ุชุฎุฒูู ูุคูุช ููุฑุณุงุฆู ูุงููุญุงุฏุซุงุช
- **Lazy Loading**: ุชุญููู ุงูุฑุณุงุฆู ุนูุฏ ุงูุญุงุฌุฉ
- **Optimization**: ุชุญุณูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### ุงููุฑุญูุฉ ุงูุชุงููุฉ
1. **ุงูุฑุณุงุฆู ุงูุตูุชูุฉ**: ุฅุถุงูุฉ ุฏุนู ุงูุฑุณุงุฆู ุงูุตูุชูุฉ
2. **ุงูุฅุดุนุงุฑุงุช**: ุฅุดุนุงุฑุงุช ููุฑูุฉ ููุฑุณุงุฆู ุงูุฌุฏูุฏุฉ
3. **ุงูุจุญุซ**: ุงูุจุญุซ ูู ูุญุชูู ุงูุฑุณุงุฆู
4. **ุงููุฑููุงุช**: ุฏุนู ุฃููุงุน ูููุงุช ุฃูุซุฑ

### ุงูุชุญุณููุงุช ุงููุฎุทุทุฉ
1. **ุงูุชุดููุฑ**: ุชุดููุฑ ุงูุฑุณุงุฆู ูู ุทุฑู ุฅูู ุทุฑู
2. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: ูุณุฎ ุงุญุชูุงุทู ููุฑุณุงุฆู
3. **ุงูุฃุฑุดูุฉ**: ุฃุฑุดูุฉ ุงููุญุงุฏุซุงุช ุงููุฏููุฉ
4. **ุงูุชุตุฏูุฑ**: ุชุตุฏูุฑ ุงููุญุงุฏุซุงุช

## ุงูุฏุนู

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงูู ุชูููุฉุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ ูุฑูู ุฑุงุจุท ุงูุญุฑู**  
**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุงูุชุงุฑูุฎ**: 2025 
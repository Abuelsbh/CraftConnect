# ุฏููู ุฅุนุฏุงุฏ ุฃููุงุน ุงูุญุฑู ูู Firebase ๐ง

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุฏูุซ ุงูุชุทุจูู ูุงุณุชุฎุฏุงู ุฃููุงุน ุงูุญุฑู ูู Firebase ุจุฏูุงู ูู ุงูููู ุงูุซุงุจุชุฉ. ูุฐุง ูุชูุญ ุฅุถุงูุฉ ุญุฑู ุฌุฏูุฏุฉ ุฃู ุชุนุฏูู ุงูุญุฑู ุงูููุฌูุฏุฉ ูุจุงุดุฑุฉ ูู Firebase ุฏูู ุงูุญุงุฌุฉ ูุชุญุฏูุซ ุงูุชุทุจูู.

## ูููู ุงูุจูุงูุงุช ูู Firebase

### Collection: `crafts`

ูู ูุซููุฉ ูู collection `crafts` ุชุญุชูู ุนูู ุงูุญููู ุงูุชุงููุฉ:

```json
{
  "value": "carpenter",
  "translations": {
    "ar": "ุนุทู ูุฌุงุฑุฉ",
    "en": "Carpentry Problem"
  },
  "order": 1,
  "isActive": true,
  "createdAt": "2024-01-01T00:00:00.000Z",
  "updatedAt": "2024-01-01T00:00:00.000Z"
}
```

### ุดุฑุญ ุงูุญููู:

- **`value`** (String, ูุทููุจ): ุงููููุฉ ุงููุณุชุฎุฏูุฉ ูู ุงูููุฏ (ูุซู: `carpenter`, `electrical`)
- **`translations`** (Map<String, String>, ูุทููุจ): ุงูุชุฑุฌูุงุช ููุญุฑูุฉ
  - `ar`: ุงูุชุฑุฌูุฉ ุงูุนุฑุจูุฉ
  - `en`: ุงูุชุฑุฌูุฉ ุงูุฅูุฌููุฒูุฉ
- **`order`** (Number, ุงุฎุชูุงุฑู): ุชุฑุชูุจ ุนุฑุถ ุงูุญุฑูุฉ (ุงูุฃุตุบุฑ ูุธูุฑ ุฃููุงู)
- **`isActive`** (Boolean, ุงุฎุชูุงุฑู): ูู ุงูุญุฑูุฉ ูุดุทุฉ (ุงูุชุฑุงุถู: `true`)
- **`createdAt`** (Timestamp/String, ุงุฎุชูุงุฑู): ุชุงุฑูุฎ ุงูุฅูุดุงุก
- **`updatedAt`** (Timestamp/String, ุงุฎุชูุงุฑู): ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ

## ููููุฉ ุฅุถุงูุฉ ุญุฑูุฉ ุฌุฏูุฏุฉ ูู Firebase

### ุงูุทุฑููุฉ ุงูุฃููู: ูู Firebase Console

1. **ุงูุชุญ Firebase Console**
   - ุงุฐูุจ ุฅูู [Firebase Console](https://console.firebase.google.com/)
   - ุงุฎุชุฑ ูุดุฑูุนู

2. **ุงูุชูู ุฅูู Firestore Database**
   - ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุฑ **Firestore Database**
   - ุชุฃูุฏ ูู ุฃูู ูู ูุถุน **Data** (ูููุณ Rules)

3. **ุฃุถู Collection ุฌุฏูุฏ (ุฅุฐุง ูู ููู ููุฌูุฏุงู)**
   - ุฅุฐุง ูู ููู ููุงู collection ุจุงุณู `crafts`ุ ุงููุฑ ุนูู **Start collection**
   - ุฃุฏุฎู ุงุณู Collection: `crafts`
   - ุงููุฑ **Next**

4. **ุฃุถู ูุซููุฉ ุฌุฏูุฏุฉ**
   - ุงููุฑ ุนูู **Add document** ูู collection `crafts`
   - Document ID: ููููู ุงุณุชุฎุฏุงู ุงููููุฉ (value) ูู IDุ ุฃู ุชุฑู Firebase ููุดุฆ ID ุชููุงุฆูุงู
   - ุฃุถู ุงูุญููู ุงูุชุงููุฉ:

   ```
   Field name: value
   Type: string
   Value: plumber (ูุซุงู)
   ```

   ```
   Field name: translations
   Type: map
   ุซู ุฃุถู ุฏุงุฎู ุงูู map:
     - Field: ar, Type: string, Value: ุนุทู ุณุจุงูุฉ
     - Field: en, Type: string, Value: Plumbing Problem
   ```

   ```
   Field name: order
   Type: number
   Value: 3 (ูุซุงู - ุญุณุจ ุชุฑุชูุจ ุงูุนุฑุถ ุงููุทููุจ)
   ```

   ```
   Field name: isActive
   Type: boolean
   Value: true
   ```

   ```
   Field name: createdAt
   Type: timestamp
   Value: (ุงุฎุชุฑ ุงูุชุงุฑูุฎ ุงูุญุงูู)
   ```

   ```
   Field name: updatedAt
   Type: timestamp
   Value: (ุงุฎุชุฑ ุงูุชุงุฑูุฎ ุงูุญุงูู)
   ```

5. **ุงุญูุธ ุงููุซููุฉ**
   - ุงููุฑ ุนูู **Save**

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ูู ุงูููุฏ (ูููุทูุฑูู)

ููููู ุงุณุชุฎุฏุงู ุฎุฏูุฉ `CraftService` ูุฅุถุงูุฉ ุญุฑูุฉ ุฌุฏูุฏุฉ:

```dart
import 'package:uuid/uuid.dart';
import 'lib/services/craft_service.dart';
import 'lib/Models/craft_model.dart';

final craftService = CraftService();
final uuid = Uuid();

// ุฅูุดุงุก ุญุฑูุฉ ุฌุฏูุฏุฉ
final newCraft = CraftModel(
  id: uuid.v4(), // ุฃู ุงุณุชุฎุฏู ุงููููุฉ ูู ID: 'plumber'
  value: 'plumber',
  translations: {
    'ar': 'ุนุทู ุณุจุงูุฉ',
    'en': 'Plumbing Problem',
  },
  order: 3,
  isActive: true,
  createdAt: DateTime.now(),
  updatedAt: DateTime.now(),
);

// ุฅุถุงูุฉ ุงูุญุฑูุฉ ุฅูู Firebase
await craftService.addCraft(newCraft);
```

## ุงูุญุฑู ุงูุงูุชุฑุงุถูุฉ ุงููุทููุจุฉ

ูุฌุจ ุฅุถุงูุฉ ุงูุญุฑู ุงูุชุงููุฉ ูู Firebase:

| Value | Arabic Translation | English Translation | Order |
|-------|-------------------|---------------------|-------|
| `carpenter` | ุนุทู ูุฌุงุฑุฉ | Carpentry Problem | 1 |
| `electrical` | ุนุทู ููุฑุจุงุฆู | Electrical Problem | 2 |
| `plumbing` | ุนุทู ุณุจุงูุฉ | Plumbing Problem | 3 |
| `painter` | ุนุทู ุฏูุงู | Painting Problem | 4 |
| `mechanic` | ุนุทู ูููุงูููู | Mechanical Problem | 5 |
| `hvac` | ุนุทู ุชูููู | HVAC Problem | 6 |
| `satellite` | ุนุทู ุณุชุงูุงูุช | Satellite Problem | 7 |
| `internet` | ุนุทู ุฅูุชุฑูุช | Internet Problem | 8 |
| `tiler` | ุนุทู ุจูุงุท | Tiling Problem | 9 |
| `locksmith` | ุนุทู ุฃููุงู | Locksmith Problem | 10 |

## ูุซุงู ูุงูู ูุฅุถุงูุฉ ุญุฑูุฉ ุฌุฏูุฏุฉ

### ูุซุงู: ุฅุถุงูุฉ ุญุฑูุฉ "ูุฌุงุฑ ุฃุซุงุซ"

1. **ูู Firebase Console:**
   - Collection: `crafts`
   - Document ID: `furniture_carpenter` (ุฃู ุงุชุฑูู ุชููุงุฆูุงู)
   - Fields:
     ```
     value: "furniture_carpenter"
     translations: {
       ar: "ูุฌุงุฑ ุฃุซุงุซ"
       en: "Furniture Carpenter"
     }
     order: 11
     isActive: true
     createdAt: [ุงูุชุงุฑูุฎ ุงูุญุงูู]
     updatedAt: [ุงูุชุงุฑูุฎ ุงูุญุงูู]
     ```

2. **ุงููุชูุฌุฉ:**
   - ุณุชุธูุฑ ุงูุญุฑูุฉ ุงูุฌุฏูุฏุฉ ูู:
     - ุตูุญุฉ ุชุณุฌูู ุงูุนุทู ุงูุฌุฏูุฏ
     - ุตูุญุฉ ุชุนุฏูู ุงูููู ุงูุดุฎุตู ููุญุฑูู
   - ุงูุชุฑุฌูุฉ ุณุชุชุบูุฑ ุชููุงุฆูุงู ุญุณุจ ูุบุฉ ุงูุชุทุจูู

## ุชุญุฏูุซ ุญุฑูุฉ ููุฌูุฏุฉ

### ูู Firebase Console:

1. ุงุฐูุจ ุฅูู collection `crafts`
2. ุงุฎุชุฑ ุงููุซููุฉ ุงูุชู ุชุฑูุฏ ุชุญุฏูุซูุง
3. ุงููุฑ ุนูู ุงูุญูู ุงูุฐู ุชุฑูุฏ ุชุนุฏููู
4. ุนุฏูู ุงููููุฉ
5. ุงุญูุธ ุงูุชุบููุฑุงุช

### ูุซุงู: ุชุญุฏูุซ ุชุฑุฌูุฉ ุญุฑูุฉ ููุฌูุฏุฉ

```
Document: carpenter
Field: translations.ar
New Value: ูุฌุงุฑ ูุญุชุฑู
```

## ุชุนุทูู ุญุฑูุฉ (ุจุฏูู ุญุฐููุง)

1. ุงุฐูุจ ุฅูู ุงููุซููุฉ ูู Firebase
2. ุนุฏูู ุญูู `isActive` ุฅูู `false`
3. ุงุญูุธ ุงูุชุบููุฑุงุช

**ุงููุชูุฌุฉ:** ูู ุชุธูุฑ ุงูุญุฑูุฉ ูู ุงูุชุทุจููุ ููู ุงูุจูุงูุงุช ุณุชุจูู ูุญููุธุฉ.

## ุญุฐู ุญุฑูุฉ

1. ุงุฐูุจ ุฅูู ุงููุซููุฉ ูู Firebase
2. ุงููุฑ ุนูู ุฃููููุฉ ุงููุงุฆูุฉ (ุซูุงุซ ููุงุท)
3. ุงุฎุชุฑ **Delete document**
4. ุฃูุฏ ุงูุญุฐู

**ุชุญุฐูุฑ:** ุงุญุฐู ููุท ุฅุฐุง ููุช ูุชุฃูุฏุงู ุฃูู ูู ุชุญุชุงุฌ ูุฐู ุงูุญุฑูุฉ ูุฑุฉ ุฃุฎุฑู.

## ููุงุนุฏ Firestore ุงููุทููุจุฉ

ุชุฃูุฏ ูู ุฃู ููุงุนุฏ Firestore ุชุณูุญ ุจุงููุฑุงุกุฉ ููุญุฑู:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ุงูุณูุงุญ ุจูุฑุงุกุฉ ุงูุญุฑู ููุฌููุน
    match /crafts/{craftId} {
      allow read: if true;
      // ุงูุณูุงุญ ุจุงููุชุงุจุฉ ูููุณุคูููู ููุท (ููููู ุชุนุฏูู ูุฐุง ุญุณุจ ุงุญุชูุงุฌู)
      allow write: if request.auth != null && 
                      get(/databases/$(database)/documents/users/$(request.auth.uid)).data.isAdmin == true;
    }
  }
}
```

## ููุงุญุธุงุช ูููุฉ

1. **ุงููููุฉ (value) ูุฌุจ ุฃู ุชููู ูุฑูุฏุฉ:** ูุง ุชุณุชุฎุฏู ููุณ ุงููููุฉ ูุญุฑูุชูู ูุฎุชููุชูู
2. **ุงูุชุฑุฌูุงุช ูุทููุจุฉ:** ุชุฃูุฏ ูู ุฅุถุงูุฉ ุชุฑุฌูุฉ ุนูู ุงูุฃูู ููุนุฑุจูุฉ (`ar`)
3. **ุงูุชุฑุชูุจ (order):** ุงุณุชุฎุฏู ุฃุฑูุงู ูุชุณูุณูุฉ ูุชุญุฏูุฏ ุชุฑุชูุจ ุงูุนุฑุถ
4. **ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ:** ุงูุชุทุจูู ูุณุชุฎุฏู Streamุ ูุฐุง ุงูุชุบููุฑุงุช ุณุชุธูุฑ ููุฑุงู ูู ุงูุชุทุจูู
5. **Fallback:** ูู ุญุงูุฉ ูุดู ุงูุงุชุตุงู ุจู Firebaseุ ุณูุณุชุฎุฏู ุงูุชุทุจูู ุงูููู ุงูุงูุชุฑุงุถูุฉ

## ุงุฎุชุจุงุฑ ุงูุฅุนุฏุงุฏ

1. ุฃุถู ุญุฑูุฉ ุฌุฏูุฏุฉ ูู Firebase
2. ุงูุชุญ ุงูุชุทุจูู
3. ุงุฐูุจ ุฅูู ุตูุญุฉ ุชุณุฌูู ุนุทู ุฌุฏูุฏ
4. ุชุญูู ูู ุธููุฑ ุงูุญุฑูุฉ ุงูุฌุฏูุฏุฉ
5. ุบููุฑ ูุบุฉ ุงูุชุทุจูู ูุชุญูู ูู ุงูุชุฑุฌูุฉ

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุญุฑู ูุง ุชุธูุฑ ูู ุงูุชุทุจูู

**ุงูุญููู:**
1. ุชุญูู ูู ุฃู `isActive` = `true`
2. ุชุญูู ูู ุฃู Collection ุงุณูู `crafts` (ุจุตูุบุฉ ุงูุฌูุน)
3. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
4. ุชุญูู ูู ููุงุนุฏ Firestore (ูุฌุจ ุงูุณูุงุญ ุจุงููุฑุงุกุฉ)

### ุงููุดููุฉ: ุงูุชุฑุฌูุฉ ูุง ุชุชุบูุฑ

**ุงูุญููู:**
1. ุชุญูู ูู ุฃู ุญูู `translations` ูุญุชูู ุนูู ุงูููุชุงุญ ุงูุตุญูุญ (`ar` ุฃู `en`)
2. ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู ุจุนุฏ ุชุบููุฑ ุงููุบุฉ
3. ุชุญูู ูู ุฃู ุงูุชุทุจูู ูุณุชุฎุฏู `CraftService` ุจุดูู ุตุญูุญ

### ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุชุฑุชูุจ

**ุงูุญููู:**
1. ุชุฃูุฏ ูู ุฃู ุญูู `order` ููุฌูุฏ ูู ุฌููุน ุงููุซุงุฆู
2. ูู Firestoreุ ุฃุถู index ุนูู `order` ุฅุฐุง ูุงู ููุงู ุนุฏุฏ ูุจูุฑ ูู ุงูุญุฑู:
   - ุงุฐูุจ ุฅูู Firestore โ Indexes
   - ุฃุถู index ุนูู collection `crafts` ูุน ุงูุญููู: `isActive` (Ascending), `order` (Ascending)

## ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงููุ ุชุญูู ูู:
- ููู `lib/services/craft_service.dart` - ุฎุฏูุฉ ุฌูุจ ุงูุญุฑู
- ููู `lib/Models/craft_model.dart` - ูููุฐุฌ ุงูุญุฑูุฉ
- ูููุงุช ุงูุตูุญุงุช ุงูุชู ุชุณุชุฎุฏู ุงูุญุฑู:
  - `lib/Modules/ProblemReport/problem_report_stepper_screen.dart`
  - `lib/Modules/ArtisanProfile/edit_artisan_profile_screen.dart`
  - `lib/Modules/FaultReport/fault_report_screen.dart`





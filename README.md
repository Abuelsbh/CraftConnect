# رابط الحرف - تطبيق الحرفيين

تطبيق Flutter متكامل يربط المستخدمين بالحرفيين المحليين، مع نظام دردشة فوري متطور.

## 🚀 المميزات

### ✅ المميزات المكتملة
- **نظام المصادقة الكامل**: تسجيل الدخول والتسجيل مع Firebase Auth
- **نظام الدردشة الفوري**: محادثات فورية باستخدام Firebase Realtime Database
- **الخرائط التفاعلية**: عرض الحرفيين على الخريطة مع Google Maps
- **البحث والفلترة**: البحث عن الحرفيين حسب الموقع ونوع الحرفة
- **الملفات الشخصية**: ملفات شخصية تفصيلية للحرفيين
- **الترجمة**: دعم كامل للعربية والإنجليزية
- **التصميم المتجاوب**: واجهة مستخدم حديثة ومتجاوبة

### 🔄 المميزات المخططة
- **الرسائل الصوتية**: تسجيل وإرسال رسائل صوتية
- **الإشعارات**: إشعارات فورية للرسائل الجديدة
- **نظام الدفع**: دفع إلكتروني للخدمات
- **التقييمات**: نظام تقييم وتعليقات
- **الحجز المباشر**: حجز مواعيد مع الحرفيين

## 🛠️ التقنيات المستخدمة

### Frontend
- **Flutter**: إطار العمل الرئيسي
- **Provider**: إدارة الحالة
- **Go Router**: التنقل بين الصفحات
- **Flutter Screenutil**: التصميم المتجاوب

### Backend & Services
- **Firebase Authentication**: نظام المصادقة
- **Firebase Realtime Database**: قاعدة البيانات الفورية للدردشة
- **Cloud Firestore**: قاعدة البيانات الرئيسية
- **Firebase Storage**: تخزين الملفات والصور
- **Google Maps**: الخرائط التفاعلية

### Libraries
- **geolocator**: تحديد الموقع
- **geocoding**: تحويل الإحداثيات إلى عناوين
- **intl**: الترجمة والتوطين
- **uuid**: إنشاء معرفات فريدة
- **equatable**: مقارنة الكائنات

## 📱 نظام الدردشة

### المميزات
- **محادثات فورية**: استخدام Firebase Realtime Database
- **واجهة مستخدم حديثة**: تصميم جميل ومتجاوب
- **إدارة المحادثات**: إنشاء وحذف وإدارة غرف الدردشة
- **عرض الرسائل**: فقاعات رسائل جميلة مع دعم النصوص والصور
- **حالة الرسائل**: عرض حالة الإرسال والقراءة
- **الوقت والتاريخ**: عرض توقيت الرسائل بشكل ذكي

### البنية التقنية
```
lib/Modules/Chat/
├── chat_page.dart: صفحة قائمة المحادثات
├── chat_room_screen.dart: شاشة غرفة الدردشة
└── widgets/
    ├── chat_room_tile.dart: عنصر غرفة الدردشة
    ├── message_bubble.dart: فقاعة الرسالة
    └── chat_input.dart: إدخال الدردشة
```

## 🏗️ هيكل المشروع

```
lib/
├── core/                    # النواة الأساسية
│   ├── Font/               # إدارة الخطوط
│   ├── Language/           # الترجمة والتوطين
│   ├── Theme/              # إدارة السمات
│   └── network/            # إدارة الشبكة
├── features/               # الميزات الرئيسية
│   ├── auth/               # نظام المصادقة
│   ├── chat/               # نظام الدردشة
│   ├── home/               # الصفحة الرئيسية
│   ├── maps/               # الخرائط
│   └── onboarding/         # صفحات الترحيب
├── Models/                 # نماذج البيانات
├── Modules/                # وحدات التطبيق
├── providers/              # مزودي الحالة
├── services/               # الخدمات
├── shared/                 # المكونات المشتركة
└── Utilities/              # الأدوات المساعدة
```

## 🚀 التثبيت والتشغيل

### المتطلبات
- Flutter SDK 3.5.3+
- Dart 3.0+
- Android Studio / VS Code
- حساب Firebase

### خطوات التثبيت

1. **استنساخ المشروع**
```bash
git clone <repository-url>
cd template_2025-main
```

2. **تثبيت التبعيات**
```bash
flutter pub get
```

3. **إعداد Firebase**
   - إنشاء مشروع Firebase جديد
   - إضافة تطبيق Android/iOS
   - تحميل ملف `google-services.json` (Android)
   - تحميل ملف `GoogleService-Info.plist` (iOS)
   - وضع الملفات في المجلدات المناسبة

4. **تكوين Firebase Realtime Database**
   - إنشاء قاعدة البيانات
   - تعيين قواعد الأمان
   - تفعيل المصادقة

5. **تشغيل التطبيق**
```bash
flutter run
```

## 🔧 التكوين

### Firebase Realtime Database Rules
```json
{
  "rules": {
    "chat_rooms": {
      "$roomId": {
        ".read": "auth != null && (data.child('participant1Id').val() == auth.uid || data.child('participant2Id').val() == auth.uid)",
        ".write": "auth != null && (data.child('participant1Id').val() == auth.uid || data.child('participant2Id').val() == auth.uid)"
      }
    },
    "messages": {
      "$messageId": {
        ".read": "auth != null && (data.child('senderId').val() == auth.uid || data.child('receiverId').val() == auth.uid)",
        ".write": "auth != null && data.child('senderId').val() == auth.uid"
      }
    }
  }
}
```

## 📊 قاعدة البيانات

### Firebase Realtime Database Structure
```json
{
  "chat_rooms": {
    "user1_user2": {
      "id": "user1_user2",
      "participant1Id": "user1",
      "participant2Id": "user2",
      "lastMessage": "آخر رسالة",
      "lastMessageTime": 1640995200000,
      "hasUnreadMessages": true,
      "unreadCount": 3
    }
  },
  "messages": {
    "message_id": {
      "id": "message_id",
      "senderId": "user1",
      "receiverId": "user2",
      "content": "محتوى الرسالة",
      "imageUrl": "رابط الصورة (اختياري)",
      "timestamp": 1640995200000,
      "isRead": false,
      "type": "text"
    }
  }
}
```

## 🎨 التصميم

### السمات المدعومة
- **الوضع الفاتح**: تصميم نظيف وحديث
- **الوضع المظلم**: تجربة مستخدم مريحة في الإضاءة المنخفضة
- **الخطوط**: دعم خطوط عربية وإنجليزية
- **الألوان**: نظام ألوان متسق ومتجاوب

### المكونات
- **ChatRoomTile**: عرض غرف الدردشة
- **MessageBubble**: فقاعات الرسائل
- **ChatInput**: إدخال الرسائل
- **CustomButton**: أزرار مخصصة
- **CustomTextField**: حقول إدخال مخصصة

## 🔒 الأمان

- **المصادقة**: يجب تسجيل الدخول للوصول للمحادثات
- **الصلاحيات**: يمكن للمستخدمين الوصول فقط لمحادثاتهم
- **التحقق**: التحقق من هوية المرسل والمستقبل
- **التشفير**: تشفير البيانات في النقل

## 📈 الأداء

- **Streaming**: استخدام Streams للرسائل الفورية
- **Caching**: تخزين مؤقت للرسائل والمحادثات
- **Lazy Loading**: تحميل الرسائل عند الحاجة
- **Optimization**: تحسين استعلامات قاعدة البيانات

## 🧪 الاختبار

```bash
# تشغيل الاختبارات
flutter test

# تحليل الكود
flutter analyze

# بناء التطبيق
flutter build apk --release
```

## 📱 المنصات المدعومة

- ✅ Android
- ✅ iOS
- 🔄 Web (قيد التطوير)
- 🔄 Desktop (قيد التطوير)

## 🤝 المساهمة

نرحب بالمساهمات! يرجى اتباع الخطوات التالية:

1. Fork المشروع
2. إنشاء فرع للميزة الجديدة
3. Commit التغييرات
4. Push إلى الفرع
5. إنشاء Pull Request

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT. راجع ملف `LICENSE` للتفاصيل.

## 📞 الدعم

لأي استفسارات أو مشاكل تقنية:
- 📧 البريد الإلكتروني: support@craftconnect.com
- 💬 الدردشة: [Telegram Channel](https://t.me/craftconnect)
- 📖 التوثيق: [Documentation](https://docs.craftconnect.com)

## 🎯 الطريق المستقبلي

### المرحلة التالية
1. **الرسائل الصوتية**: إضافة دعم الرسائل الصوتية
2. **الإشعارات**: إشعارات فورية للرسائل الجديدة
3. **البحث**: البحث في محتوى الرسائل
4. **المرفقات**: دعم أنواع ملفات أكثر

### التحسينات المخططة
1. **التشفير**: تشفير الرسائل من طرف إلى طرف
2. **النسخ الاحتياطي**: نسخ احتياطي للرسائل
3. **الأرشفة**: أرشفة المحادثات القديمة
4. **التصدير**: تصدير المحادثات

---

**تم التطوير بواسطة فريق رابط الحرف**  
**الإصدار**: 1.0.0  
**التاريخ**: 2025
